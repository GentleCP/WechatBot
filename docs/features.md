# 特性说明

`corpwechat-bot`的定位是让用户随时随地了解服务器端程序的运行结果，同类型的方法有很多，例如邮件，钉钉（这两个的消息推送我在我的另一个库[cptools](https://github.com/GentleCP/cptools)中实现了，有兴趣的可以去看看），bark等。但对于一般人来说，最方便的接收方式还是微信，但个人微信并不提供给开发者API（以前可以用网页微信，现在被禁了）。
拥有同样功能比较知名的有：`ServerChan`，之前提供公众号模板消息推送，但由于微信官方原因，在`21年4月底下线`，因此推出了`Turbo`版，支持企业微信消息推送。我在使用过之后发现几个主要问题:raising_hand:，并与`corpwechat-bot`进行了对比：

## 与ServerChan对比

> **注意**：ServerChan已推出可自己部署的开源版，以下对比均为商业版`ServerChan`

| 对比项               | ServerChan                                                   | corpwechat-bot                                               |
| -------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **消息推送限制**     | :disappointed_relieved: 普通用户消息推送次数限制（每天5次，会员不限） | :relaxed: ​`corpwechat-bot`直接和企业微信对接，消息发送仅受微信官方限制（每分钟20条） |
| **个人信息安全性**   | :weary: 个人企业号、应用id和密钥由`ServerChan`云端存储，所有发送的消息也经过`ServerChan`转发（先到`ServerChan`后台，再由`ServerChan`发送到微信） | :innocent: `corpwechat-bot`本身不存储任何用户的密钥（由用户本地保存），所有消息也是直接发送到企业微信后台，保证数据安全性 |
| **创建、使用便捷性** | :persevere: 主要使用步骤：<br />1.  用户注册企业微信<br />2.  创建`ServerChan`应用<br />3.  提交企业号、应用id、应用密钥到`ServerChan`，获取`sendKey`<br />4. 利用`sendKey`发送`http`请求到指定url完成消息发送 | :wink: 主要使用步骤：​<br />1. 用户注册企业微信<br />2. 创建个人消息推送应用，获取相应密钥<br />3. 一条命令`pip install -U corpwechatbot`安装<br />4. 利用`corpwechatbot`的消息发送接口发送消息 |
| **消息类型支持**     | :pensive: 仅支持`title`+`description`（支持`markdown`）的消息发送格式​ | :yum: 支持文本、`markdown`，图片、语音、视频、文件、卡片等多个企业微信提供的消息类型​ |
| **开源**             | :cry: ​不开源，所有代码均由`ServerChan`自身管控               | :sunglasses: 开源在Github​，任何人可以依据源代码添加定制自己想要的功能，或贡献自己的一份力到开源项目中 |

> **特别说明**：虽然上面的对比偏向于突出`corpwechat-bot`的优势，但并没有刻意贬低`ServerChan`的意思，作为一个公开的服务，`ServerChan`的这些特性都是可以被接受的，同时`ServerChan`也是一款**非常优秀**的消息推送工具（我之前一直在使用），支持各大类型的消息推送接口（企业微信、钉钉、bark等等），但考虑到上面的几个特性，所以我选择了自己定制并开源了`corpwechat-bot`，希望给和我一样想法的用户**多一份选择**，未来`corpwechat-bot`还会添加更多的功能和特性，详情查看主页，当然你也可以在`issue`中提出你的合理需求，或提交PR来帮助`corpwechat-bot`做的更好!!!

## 已实现功能

目前实现了两种推送消息方式，**应用消息推送**、**群聊机器人消息推送**，其中，应用消息除了从服务端发送，移动端接收以外，也支持相应的回调（移动端发送到服务端），并且在此基础上，添加了**终端一条命令式**上述两种消息的推送，具体如下：

### 应用消息推送

该推送会直接传至你的个人微信上，你会像收到好友消息一样收到通知信息，不需要安装企业微信

- 文本消息: 最普通的消息，文字内容，最长不超过2048个字节
- 图片消息：发送一张图片，可选jpg,png，大小不超过2MB，目前仅支持通过图片路径发送
- 语音消息：发送一条语音，大小不超过2MB，时长不超过60s，必须是.amr格式
- 视频消息：发送一段视频，大小不超过10MB，必须是.mp4格式
- 普通文件：其他类型的文件，大小不超过20MB（不小于5字节）
- markdown消息：传输markdown类型消息
- 图文消息：图片文字形式，带有跳转链接，适合做推广
- mpnews图文消息：有专属页面的图文消息，支持html标签内容 
- 文本卡片消息：以卡片形式呈现的文本，包含跳转链接
- 任务卡片消息：应用与用户交互的卡片，需要配置回调
- **应用消息回调**：实现移动端到服务端的交互，具体看使用教程

### 群聊机器人消息推送

该推送仅会发送消息到企业微信群聊中，经测试，个人微信的企业群聊不会收到机器人发送的消息，因此要收到消息需安装企业微信

- 文本消息：普通文字消息，最长不超过2048个字节
- 图片消息：图片大小不超过2M
- 图文消息：图片文字形式，带有跳转链接，适合打广告
- 文件消息：发送单个文件到群聊，大小在5B~20MB之间

### 终端一条命令式消息推送

直接在终端发送消息，仅支持文本与markdown，具体查看使用教程